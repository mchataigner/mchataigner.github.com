
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>MootCube.info</title>
  <meta name="author" content="Mathieu Chataigner">

  
  <meta name="description" content="Ce jeudi 21 novembre une quinzaine de personnes se sont retrouvées pour une soirée en mode ‘hackathon’ animée par @un_Jon, @Piwai et @Randhindi.
Le &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mootcube.info/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="MootCube.info" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36717912-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">MootCube.info</a></h1>
  
    <h2>Un blog pour les développeurs et plus...</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mootcube.info" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/30/shipping-scala-webapp-en-mode-hackathon/">Shipper Des API, Du Web Avec Scala Et De l&#8217;Android en Mode Hackathon</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-30T00:00:00+01:00" pubdate data-updated="true">Nov 30<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><!--Included file 'JB/setup' not found in _includes directory-->


<!--Retour sur la soirée ‘Shipper des API, du Web avec Scala et de l'Android en mode hackathon’-->


<p>Ce jeudi 21 novembre une quinzaine de personnes se sont retrouvées pour une soirée en mode ‘hackathon’ animée par <a href="https://twitter.com/un_Jon">@un_Jon</a>, <a href="https://twitter.com/Piwai">@Piwai</a> et <a href="https://twitter.com/randhindi">@Randhindi</a>.
Le but de la soirée était de nous présenter dans les grandes lignes ce qu’est un hackathon et de nous donner billes pour y être un minimum préparé.</p>

<h2>Un hackathon, qu’est-ce c’est?</h2>

<p>La plupart du temps, c’est un événement qui se déroule sur un week-end. Cela se présente sous la forme d’un concours entre plusieurs équipes composées de 1 à 5 personnes. Chaque groupe a entre 24-36h pour développer une application, la mettre en production et la présenter devant un jury. À la différence des startup-weekend, ici il faut que l’application soit fonctionnelle pour être présentée. Très souvent, des sponsors sont rattachés à ces événements et c’est l’occasion de gagner de nombreux lots. Par exemple, <a href="http://angelhack.com/">AngelHack</a>, un hackathon organisé à l’échelle internationale le week-end du 1er décembre 2012 à Paris, offrira à l’équipe gagnante un séjour de 6 semaines pour la Silicon Valley pour y rencontrer des investisseurs, des médias et des boîtes orientées technologies. Il est intéressant de noter que plus de 30% des finalistes trouvent des financements et montent des startups à la suite de ces événements.</p>

<h3>Quelques conseils</h3>

<p>Voici quelques conseils pour tous ceux qui auraient envie de se lancer:</p>

<ul>
<li><p><strong>L’équipe</strong>: former une équipe équilibrée avec 1 product manager, 2 front et 2 back. Le product manager prend tout son sens pour la coordination du front (UI + UX), back (API), et c’est lui qui aura la lourde tâche de faire la présentation/démo devant le jury. Pas besoin d’y aller avec une équipe déjà constituée, les participants se répartissent sur place en fonction de leurs idées de produit. Faire attention à avoir une application modulaire, pour pouvoir couper une partie à tout moment et faciliter la répartition des tâches au sein de l’équipe. Il est important aussi de ne pas rester du début à la fin sur les mêmes features et communiquer régulièrement pour voir où on en est !</p></li>
<li><p><strong>Les technos</strong>: Utiliser une technologie que l’on connaît (pour éviter de passer son temps à lire la doc), enlever la partie test (pour gagner du temps, l’objectif est le prototype!), et les println suffisent amplement ! Enfin, venir avec son environnement de développement prêt à travailler en préparant en amont le squelette d’une application (combien de temps on perd à tout configurer, IDE, maven/sbt, dépendances&#8230;).</p></li>
<li><p><strong>Le produit</strong>: choisir un produit simple et cool (KISS) pour avoir un ‘WOW effect’ durant la présentation et choisir un nom qui claque. Penser à soigner les UI+UX, car c’est la première chose que le jury va voir.</p></li>
<li><p><strong>Le pitch</strong>: c’est le rôle du PM ! Commencer à penser à la présentation du produit bien avant la fin de la réalisation, et ne pas hésiter à adapter son discours suite aux réactions du jury face aux autres produits (si on ne passe pas en premier bien sûr :) ).</p></li>
<li><p><strong>Autres conseils pratiques</strong>: faire des pauses régulièrement, dormir mais pas trop, ne pas manger trop lourd&#8230;et éviter de boire trop de redbull.</p></li>
</ul>


<h2>Maintenant c’est à nous de coder!</h2>

<p>A cette soirée découverte hackathon, <a href="https://twitter.com/un_Jon">@un_Jon</a> (maître Monoïd) et <a href="https://twitter.com/Piwai">@Piwai</a> (maître Android) ont chacun défendus leur technologie.</p>

<h3>Pourquoi Scala?</h3>

<p>Scala est un langage moins verbeux que Java, typesafe, avec des fonction de plus haut niveau sur les collection notamment. Il permet aussi d’obtenir un résultat rapidement sans avoir recours à des frameworks “exotiques”. Combiné avec Unfiltered, on peut shipper une API web REST en idiomatic Scala. Play2 peut aussi apporter des solutions intéressantes avec les iteratees. Attention à ne pas se risquer à utiliser une version trop récente de Scala* (comme la 2.10), qui peut être instable et offre des fonctionnalités qui n’apporteraient rien de plus. En résumé, Scala ça poutre** !</p>

<p>* A noter que le mot monoïd n’a étonnement pas été prononcé&#8230;</p>

<p>** citation bien connue</p>

<h3>Pourquoi SBT?</h3>

<p>Parce que cet outil de gestion de dépendances s’intrègre totalement avec Scala et qu’il offre une console qui roxxe des mamans ours. Inutile donc de s’embêter avec Maven.</p>

<h3>Pourquoi Android?</h3>

<p>Parce que c’est l’OS qui est en train de devenir maitre du monde! Et que cette soirée était organisé par @Piwai (très bon professeur Android). Plus sérieusement, il faut garder en tête, que ce que le jury verra en premier, c’est le visuel de l’application. Inutile de partir dans des choses trop compliquées, il faut rester simple et limiter le cadre dès le début. La rotation de l’écran est une feature pas évidente, on peut tout à fait s’en passer pour un hackathon en figeant les écrans. Pour le squelette, penser à <a href="http://androidkickstartr.com/">androidkickstartr.com</a>, pour les libs <a href="https://code.google.com/p/android-ui-utils/">android-ui-utils.googlecode.com</a>, <a href="http://www.androiduipatterns.com/">androiduipatterns.com</a>, <a href="http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html">Spring RestTemplates</a> ou encore <a href="http://androidannotations.org/">androidannotations.org</a>.</p>

<p>Enfin, s’il y a une idée à garder en tête, c’est celle-ci:  <strong>il faut que le produit marche! Pas besoin de fournir un super beau code!</strong></p>

<h2>L’implémentation (partie scala uniquement)</h2>

<p>Passons maintenant à l’implémentation. Nous sommes partis d’une application déjà existante, avec des fonctionnalités à rajouter ou compléter. Les squelettes sont d’ailleurs disponibles sur GitHub pour les parites scala (<a href="https://github.com/un-jon/emh">https://github.com/un-jon/emh</a>) et Android (<a href="https://github.com/pyricau/CinePotes">https://github.com/pyricau/CinePotes</a>).
Pour suivre le format d’un hackathon, nous avons formé des petits groupes de 4 personnes et nous nous sommes répartis des tâches après avoir établi ce qui nous semblait être le plus prioritaire.</p>

<center>
<img src="https://lh6.googleusercontent.com/974X8ppgJqZ8kg3rDofAV2vvpMocr3xQCihS_0xkuo7ipmeOY8f73yRecZkrCv6YMa3h6RyEW4tcnc0uBGP2o7Uq2Miv9cmq2eJRKWqZXR9mckD5Wgs" width="360px" />
</center>




<!--![hackathon style](https://lh6.googleusercontent.com/974X8ppgJqZ8kg3rDofAV2vvpMocr3xQCihS_0xkuo7ipmeOY8f73yRecZkrCv6YMa3h6RyEW4tcnc0uBGP2o7Uq2Miv9cmq2eJRKWqZXR9mckD5Wgs "hackathon style")-->


<p>Voici tout d’abord une rapide présentation de l’application.</p>

<h3>Le squelette de l’application</h3>

<p>Ce soir, il s’agit d’implémenter une application nommée ‘kplaner’ qui propose un doodle pour choisir une/des séance(s) de cinéma. Elle est composée d’une partie UI en Android, et d’une partie serveur en Scala avec l’API JSON. La partie Web Service REST va être gérée grâce à le toolkit Unfiltered.</p>

<p>Les spécifications:
- je peux choisir une date et un ciné
- on peut me proposer la liste des films qui sont autour de ces horaires, je peux checker ceux qui me branchent
- je peux envoyer des invitations à mes potes par tous les moyens qui me semblent bons</p>

<h3>Unfiltered</h3>

<p>Voici une rapide présentation de Unfiltered:</p>

<ul>
<li>la déclaration d’un web service avec l’opération HTTP Get et une réponse au format JSON s’écrit sous forme d’un contrat (intent) et ses chemins :</li>
</ul>


<figure class='code'><figcaption><span>création d&#8217;un web service Rest</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="cm">/** unfiltered plan */</span>
</span><span class='line'><span class="k">trait</span> <span class="nc">KApp</span> <span class="k">extends</span> <span class="n">unfiltered</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="nc">Plan</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">self</span><span class="k">:</span> <span class="kt">KinoService</span> <span class="kt">with</span> <span class="kt">KPlanerCreationService</span> <span class="o">=&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">intent</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="nc">GET</span><span class="o">(</span><span class="nc">Path</span><span class="o">(</span><span class="s">&quot;/kinolist&quot;</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="n">jsonResponse</span><span class="o">(</span><span class="n">listKinos</span><span class="o">())</span>
</span><span class='line'>    <span class="k">case</span> <span class="nc">GET</span><span class="o">(</span><span class="nc">Path</span><span class="o">(</span><span class="s">&quot;/filmlist&quot;</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="n">jsonResponse</span><span class="o">(</span><span class="n">listFilms</span><span class="o">())</span>
</span><span class='line'>    <span class="k">case</span> <span class="nc">GET</span><span class="o">(</span><span class="nc">Path</span><span class="o">(</span><span class="s">&quot;/sessions&quot;</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="n">jsonResponse</span><span class="o">(</span><span class="n">listShowing</span><span class="o">())</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>le lancement du serveur:</li>
</ul>


<figure class='code'><figcaption><span>création d&#8217;un serveur unfiltered</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="cm">/** embedded server */</span>
</span><span class='line'><span class="k">object</span> <span class="nc">Server</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="n">http</span> <span class="k">=</span> <span class="n">unfiltered</span><span class="o">.</span><span class="n">jetty</span><span class="o">.</span><span class="nc">Http</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span> <span class="c1">// this will not be necessary in 0.4.0</span>
</span><span class='line'>    <span class="n">http</span><span class="o">.</span><span class="n">context</span><span class="o">(</span><span class="s">&quot;/assets&quot;</span><span class="o">)</span> <span class="o">{</span> <span class="k">_</span><span class="o">.</span><span class="n">resources</span><span class="o">(</span><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="nc">URL</span><span class="o">(</span><span class="n">getClass</span><span class="o">().</span><span class="n">getResource</span><span class="o">(</span><span class="s">&quot;/www/css&quot;</span><span class="o">),</span> <span class="s">&quot;.&quot;</span><span class="o">))</span> <span class="o">}</span>
</span><span class='line'>      <span class="o">.</span><span class="n">filter</span><span class="o">(</span><span class="k">new</span> <span class="nc">KApp</span> <span class="k">with</span> <span class="nc">InMemoryKinoFixtureService</span> <span class="k">with</span> <span class="nc">InMemoryKplanerCreationService</span><span class="o">).</span><span class="n">run</span><span class="o">({</span> <span class="n">svr</span> <span class="k">=&gt;</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>      <span class="n">unfiltered</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="nc">Browser</span><span class="o">.</span><span class="n">open</span><span class="o">(</span><span class="n">http</span><span class="o">.</span><span class="n">url</span><span class="o">)</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>      <span class="o">},</span> <span class="o">{</span> <span class="n">svr</span> <span class="k">=&gt;</span>
</span><span class='line'>        <span class="n">println</span><span class="o">(</span><span class="s">&quot;shutting down server&quot;</span><span class="o">)</span>
</span><span class='line'>      <span class="o">})</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Un des avantages de Scala, est la possibilité de mettre du code xml/html inline sans passer par des strings comme le montre l’exemple suivant :</p>

<figure class='code'><figcaption><span>formulaire de création d&#8217;un nouveau doodle</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">case</span> <span class="nc">GET</span><span class="o">(</span><span class="nc">Path</span><span class="o">(</span><span class="s">&quot;/newdoodle&quot;</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="nc">Ok</span> <span class="o">~&gt;</span> <span class="nc">HtmlContent</span> <span class="o">~&gt;</span> <span class="nc">Html</span><span class="o">(</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;&lt;</span><span class="n">body</span><span class="o">&gt;&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">&quot;/kplaner&quot;</span> <span class="n">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;kinoid&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;date&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;&lt;/</span><span class="n">body</span><span class="o">&gt;&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Notre production</h3>

<p>Après quelques petits problèmes de configurations d’environnement (n’est-ce pas <a href="http://twitter.com/nivdul">@nivdul</a> :D), on est rentré dans le code.</p>

<p>Nous avons identifié 3 améliorations du squelette :</p>

<ul>
<li>ajout d’un nouveau doodle (correspondant à un cinéma et une date) à l’aide d’un formulaire.</li>
</ul>


<p>Aperçu du service de sauvegarde in memory des nouveaux doodles créés:</p>

<figure class='code'><figcaption><span>enregistrement des nouveaux doodles in memory</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">trait</span> <span class="nc">InMemoryKplanerCreationService</span> <span class="k">extends</span> <span class="nc">KPlanerCreationService</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">lazy</span> <span class="k">val</span> <span class="n">kplanerMap</span> <span class="k">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">mutable</span><span class="o">.</span><span class="nc">HashMap</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Kplaner</span><span class="o">]()</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">newKplaner</span><span class="o">(</span><span class="n">kino</span><span class="k">:</span> <span class="kt">Kino</span><span class="o">,</span> <span class="n">date</span><span class="k">:</span> <span class="kt">DateTime</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">val</span> <span class="n">uid</span> <span class="k">=</span> <span class="nc">UUID</span><span class="o">.</span><span class="n">randomUUID</span><span class="o">().</span><span class="n">toString</span>
</span><span class='line'>    <span class="k">val</span> <span class="n">kplaner</span> <span class="k">=</span> <span class="nc">Kplaner</span><span class="o">(</span><span class="n">uid</span><span class="o">,</span> <span class="n">kino</span><span class="o">,</span> <span class="n">date</span><span class="o">,</span> <span class="nc">Set</span><span class="o">.</span><span class="n">empty</span><span class="o">)</span>
</span><span class='line'>    <span class="n">kplanerMap</span> <span class="o">+=</span> <span class="n">uid</span> <span class="o">-&gt;</span> <span class="n">kplaner</span>
</span><span class='line'>    <span class="n">kplaner</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="err">…</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>affichage d’une liste filtrée sur un cinéma et une date dans un intervalle de 2h.</li>
</ul>


<figure class='code'><figcaption><span>filtre de la liste des cinémas</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">case</span> <span class="nc">GET</span><span class="o">(</span><span class="nc">Path</span><span class="o">(</span><span class="nc">Seg</span><span class="o">(</span><span class="s">&quot;sessions&quot;</span> <span class="o">::</span> <span class="n">timestamp</span> <span class="o">::</span> <span class="nc">Nil</span><span class="o">)))</span> <span class="k">=&gt;</span> <span class="n">jsonResponse</span><span class="o">(</span><span class="n">listShowing</span><span class="o">().</span><span class="n">filter</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span>
</span><span class='line'>  <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">val</span> <span class="n">showingTimestamp</span> <span class="k">=</span> <span class="n">x</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">toDate</span><span class="o">.</span><span class="n">getTime</span>
</span><span class='line'>    <span class="n">x</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">toDate</span><span class="o">.</span><span class="n">getTime</span> <span class="o">&gt;</span> <span class="n">timestamp</span><span class="o">.</span><span class="n">toLong</span> <span class="o">-</span> <span class="nc">ONE_HOUR</span> <span class="o">&amp;&amp;</span> <span class="n">showingTimestamp</span> <span class="o">&lt;</span> <span class="n">timestamp</span><span class="o">.</span><span class="n">toLong</span> <span class="o">+</span> <span class="nc">ONE_HOUR</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>ajout d’une vue de vote pour le film de son choix.</li>
</ul>


<p>Par manque de temps, on n’a pas fait le lien entre le formulaire de vote du choix du film d’un doodle et la partie API serveur, mais on y était proche.</p>

<h3>Bonus</h3>

<p>Premier soucis au niveau des dates: comment gérer une date sur différentes UI?
Un très bon article (<a href="http://blog.eklaweb.com/2012/08/28/gestion-des-dates-en-informatique/">http://blog.eklaweb.com/2012/08/28/gestion-des-dates-en-informatique/</a>) traite ce sujet d’ailleurs. Après plusieurs échanges au seins de l’équipe, il apparaît qu’il est plus simple de passer par des timestamp (nombre de (milli)secondes depuis le 1er Jan 1970) pour les transferts et d’utiliser l’API Joda Time côté Java/Scala.</p>

<p>Pour faciliter les tests*, à noter que les 2 extensions chrome JSONView et Advanced REST client sont assez simple d’utilisation et ont un rendu plutôt sympa.</p>

<p>* Penser à pointer sur le bon serveur ;) cc <a href="http://twitter.com/mchataigner">@mchataigner</a></p>

<p>Enfin pour la partie Web, il aurait été intéressant de rajouter un ‘datepicker’ pour faciliter l’entrée de la date à l’utilisateur, car trouver le datetime de tête&#8230; nous on sait pas faire.</p>

<h2>Conclusion</h2>

<!--
##Ludwine
La soirée a été très intéressante en terme de développement, puisque j’ai appris à implémenter des services REST grâce à Unfiltered. J’ai également pu constater qu’il était assez simple de gérer des formulaires html en scala. Enfin, cette soirée m’a vraiment donné envie de participer à un hackathon.

##Mathieu
-->


<p>C’était une expérience sympa. Du coup, j’ai envie d’aller au hackathon AngelHack. Cependant, je ne suis pas sûr d’être au niveau pour shipper les features assez rapidement pour gagner, je ne suis pas encore fluide en Scala. Mais rappelons-le, l’essentiel c’est de participer. Et puis on a jusqu’au 30 novembre pour s’entraîner.</p>

<p>Merci à <a href="http://twitter.com/nivdul">@nivdul</a> pour avoir co-rédigé cet article.</p>

<p>Et toi, viendras-tu au AngelHack?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/11/30/shipping-scala-webapp-en-mode-hackathon/">Shipper des API, du Web avec Scala et de l&#8217;Android en mode hackathon</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mchataigner">@mchataigner</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mchataigner',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("mchataigner", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/mchataigner" class="twitter-follow-button" data-show-count="false">Follow @mchataigner</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Mathieu Chataigner -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>. Background image by <a href="http://www.flickr.com/photos/89433098@N04/">Florian Kraft Fotografie</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mootcube';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
